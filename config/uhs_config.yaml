# =====================================================================
# SUHS-MRV Underground Hydrogen Storage (UHS) Dataset Configuration
# Version: 2.0.0
# ---------------------------------------------------------------------
# Defines all parameters for generating physics-based synthetic UHS
# operational, thermodynamic, and MRV datasets.
# =====================================================================

global:
  random_seed: 42
  n_facilities: 50

  simulation:
    start_date: "2030-01-01"
    n_years: 10
    time_step: "weekly"

  facility_type_weights:
    salt_cavern: 0.7
    porous_reservoir: 0.3

  syn_data_esg:
    module_name: "uhs"
    version: "2.0.0"

# ---------------------------------------------------------------------
# FACILITY TYPES AND PHYSICAL PARAMETERS
# ---------------------------------------------------------------------
facility_types:

  salt_cavern:
    enabled: true

    cavern_volume_m3:
      distribution: "lognormal"
      mean: 200000
      sigma: 0.5
      min: 50000
      max: 1000000

    depth_m:
      distribution: "uniform"
      min: 800
      max: 2000

    pressure_min_mpa: 4.0
    pressure_max_mpa: 18.0

    base_temperature_c: 25.0
    temperature_gradient_c_per_km: 25.0

    cushion_gas: "H2"
    working_gas_fraction_of_total: 0.4

    cycle_efficiency_bounds:
      min: 0.7
      max: 0.95

  porous_reservoir:
    enabled: true

    porosity:
      distribution: "uniform"
      min: 0.12
      max: 0.28

    permeability_mD:
      distribution: "lognormal"
      mean: 100.0
      sigma: 0.8
      min: 5.0
      max: 1000.0

    depth_m:
      distribution: "uniform"
      min: 1000
      max: 2500

    pressure_min_mpa: 8.0
    pressure_max_mpa: 25.0

    base_temperature_c: 30.0
    temperature_gradient_c_per_km: 30.0

    working_gas_fraction_of_pore_volume: 0.5

    darcy_injectivity:
      fluid_viscosity_cP: 0.02
      drainage_radius_m: 500.0
      well_radius_m: 0.15

# ---------------------------------------------------------------------
# CYCLING & OPERATIONAL BEHAVIOR
# ---------------------------------------------------------------------
cycling:
  frequency: "weekly"
  allow_daily_cycles: false

  max_cycles_per_year: 30
  min_cycles_per_year: 10

  pattern_model: "stochastic"

  mode_mix:
    injection_heavy_fraction: 0.5
    withdrawal_heavy_fraction: 0.3
    balanced_fraction: 0.2

  cycle_mass_fraction_of_capacity:
    min: 0.05
    max: 0.5

  max_relative_change_in_cycle_mass:
    per_cycle: 0.3

# ---------------------------------------------------------------------
# THERMODYNAMICS
# ---------------------------------------------------------------------
thermodynamics:
  gas_constant_R_J_per_molK: 8.314
  molar_mass_H2_kg_per_mol: 0.002016

  compressibility_Z:
    model: "piecewise_constant"
    segments:
      - pressure_min_mpa: 0.0
        pressure_max_mpa: 5.0
        Z: 1.0
      - pressure_min_mpa: 5.0
        pressure_max_mpa: 15.0
        Z: 1.05
      - pressure_min_mpa: 15.0
        pressure_max_mpa: 30.0
        Z: 1.1

  temperature_noise_c:
    distribution: "normal"
    mean: 0.0
    std: 1.0

# ---------------------------------------------------------------------
# LOSSES, PURITY, MASS BALANCE
# ---------------------------------------------------------------------
losses:
  model: "proportional"
  loss_fraction:
    distribution: "uniform"
    min: 0.001
    max: 0.02

  static_leak_kg_per_year:
    min: 0.0
    max: 10000.0

purity:
  inlet_purity_pct:
    distribution: "normal"
    mean: 99.9
    std: 0.05
    min: 98.0
    max: 100.0

  outlet_purity_noise_pct:
    distribution: "normal"
    mean: 0.0
    std: 0.1
    min: -1.0
    max: 0.0

mass_balance:
  tolerance_fraction: 0.001

# ---------------------------------------------------------------------
# STATISTICAL DISTRIBUTIONS FOR FLOWS & NOISE
# ---------------------------------------------------------------------
distributions:

  injection_mass_kg:
    distribution: "lognormal"
    relative_mean: 0.15
    relative_sigma: 0.6
    min_fraction_of_capacity: 0.02
    max_fraction_of_capacity: 0.6

  withdrawal_mass_kg:
    distribution: "lognormal"
    relative_mean: 0.12
    relative_sigma: 0.7
    min_fraction_of_capacity: 0.02
    max_fraction_of_capacity: 0.6

  pressure_noise_mpa:
    distribution: "normal"
    mean: 0.0
    std: 0.2

# ---------------------------------------------------------------------
# VALIDATION PARAMETERS
# ---------------------------------------------------------------------
validation:
  pressure_bounds_margin_mpa: 0.5

  temperature_c:
    min: 0.0
    max: 120.0

  purity_pct:
    min: 0.0
    max: 100.0

  loss_fraction:
    min: 0.001
    max: 0.02

  allow_missing_values: false

# ---------------------------------------------------------------------
# DATASET TABLE DEFINITIONS
# ---------------------------------------------------------------------
dataset:
  tables:
    facility_metadata:
      description: "Static attributes for each UHS facility."
      primary_key: "facility_id"
      fields:
        - { name: "facility_id", type: "string" }
        - { name: "facility_type", type: "string" }
        - { name: "country_code", type: "string" }
        - { name: "region", type: "string" }
        - { name: "latitude", type: "float" }
        - { name: "longitude", type: "float" }
        - { name: "depth_m", type: "float" }
        - { name: "cavern_volume_m3", type: "float" }
        - { name: "porosity", type: "float" }
        - { name: "permeability_mD", type: "float" }
        - { name: "pressure_min_mpa", type: "float" }
        - { name: "pressure_max_mpa", type: "float" }

    facility_timeseries:
      description: "Weekly UHS operational measurements per facility."
      primary_key: ["facility_id", "timestamp"]
      fields:
        - { name: "facility_id", type: "string" }
        - { name: "timestamp", type: "datetime" }
        - { name: "cycle_index", type: "integer" }
        - { name: "is_cycle_active", type: "boolean" }
        - { name: "h2_injected_kg", type: "float" }
        - { name: "h2_withdrawn_kg", type: "float" }
        - { name: "working_gas_kg", type: "float" }
        - { name: "cushion_gas_kg", type: "float" }
        - { name: "losses_kg", type: "float" }
        - { name: "pressure_mpa", type: "float" }
        - { name: "temperature_c", type: "float" }
        - { name: "purity_in_pct", type: "float" }
        - { name: "purity_out_pct", type: "float" }
        - { name: "cycle_efficiency", type: "float" }

    cycle_summary:
      description: "Cycle-level summaries per facility."
      primary_key: ["facility_id", "cycle_index"]
      fields:
        - { name: "facility_id", type: "string" }
        - { name: "cycle_index", type: "integer" }
        - { name: "cycle_start", type: "datetime" }
        - { name: "cycle_end", type: "datetime" }
        - { name: "total_injected_kg", type: "float" }
        - { name: "total_withdrawn_kg", type: "float" }
        - { name: "total_losses_kg", type: "float" }
        - { name: "avg_pressure_mpa", type: "float" }
        - { name: "avg_temperature_c", type: "float" }
        - { name: "cycle_efficiency", type: "float" }

# ---------------------------------------------------------------------
# OFP & OSDU CONCEPTUAL ALIGNMENT
# ---------------------------------------------------------------------
ofp_alignment:
  conceptual_alignment_only: true
  facility_identifier_field: "facility_id"
  activity_time_granularity: "weekly"
  measurement_context: "underground_hydrogen_storage_cycle"
  notes:
    - "Facilities correspond conceptually to OFP Facility entities."
    - "Weekly injection/withdrawal cycles correspond to OFP Activity + Measurement patterns."
    - "Dataset may support future OFP-based emissions modeling."

osdu_alignment:
  conceptual_alignment_only: true
  entities:
    facility: "OSDU Facility (master-data concept)"
    well_or_wellbore: "OSDU Well / Wellbore"
    measurement: "OSDU Measurement (time-series concept)"
  notes:
    - "UHS facilities modeled as specialized Facility instances."
    - "Time-series rows follow OSDU measurement-like structures."
    - "No OSDU UHS schema exists at present; this dataset acts as a prototype."
